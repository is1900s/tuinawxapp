<!-- 技师列表页 -->
<view class="technician-list-page">
  <!-- 搜索和筛选栏 -->
  <view class="filter-bar">
    <view class="search-section">
      <view class="search-input" bindtap="onSearchTap">
        <text class="search-icon">🔍</text>
        <text class="search-placeholder">搜索技师姓名或服务</text>
      </view>
    </view>

    <!-- 筛选条件 -->
    <scroll-view class="filter-scroll" scroll-x="true">
      <view class="filter-options">
        <!-- 性别筛选 -->
        <view class="filter-group">
          <view class="filter-label">性别：</view>
          <view class="filter-values">
            <text
              class="filter-value {{filters.gender === '' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="gender"
              data-value=""
            >不限</text>
            <text
              class="filter-value {{filters.gender === 'male' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="gender"
              data-value="male"
            >男技师</text>
            <text
              class="filter-value {{filters.gender === 'female' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="gender"
              data-value="female"
            >女技师</text>
          </view>
        </view>

        <!-- 服务类型筛选 -->
        <view class="filter-group">
          <view class="filter-label">服务：</view>
          <view class="filter-values">
            <text
              class="filter-value {{filters.serviceType === '' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="serviceType"
              data-value=""
            >不限</text>
            <text
              class="filter-value {{filters.serviceType === 'full' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="serviceType"
              data-value="full"
            >全身</text>
            <text
              class="filter-value {{filters.serviceType === 'local' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="serviceType"
              data-value="local"
            >局部</text>
            <text
              class="filter-value {{filters.serviceType === 'foot' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="serviceType"
              data-value="foot"
            >足疗</text>
          </view>
        </view>

        <!-- 排序方式 -->
        <view class="filter-group">
          <view class="filter-label">排序：</view>
          <view class="filter-values">
            <text
              class="filter-value {{filters.sortBy === 'distance' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="sortBy"
              data-value="distance"
            >距离优先</text>
            <text
              class="filter-value {{filters.sortBy === 'rating' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="sortBy"
              data-value="rating"
            >评分优先</text>
            <text
              class="filter-value {{filters.sortBy === 'orders' ? 'active' : ''}}"
              bindtap="onFilterChange"
              data-type="sortBy"
              data-value="orders"
            >订单优先</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 统计信息 -->
  <view class="stats-bar">
    <text class="stats-text">共找到 {{totalCount}} 位技师</text>
    <view class="location-info">
      <text class="location-icon">📍</text>
      <text class="location-text">{{locationText}}</text>
    </view>
  </view>

  <!-- 技师列表 -->
  <scroll-view class="technician-scroll" scroll-y="true" bindscrolltolower="onLoadMore">
    <view class="technician-list">
      <view
        class="technician-item"
        wx:for="{{technicians}}"
        wx:key="id"
        bindtap="onTechnicianTap"
        data-technician="{{item}}"
      >
        <!-- 技师基本信息 -->
        <view class="technician-header">
          <image class="technician-avatar" src="{{item.avatar}}" mode="aspectFill" />
          <view class="technician-info">
            <view class="technician-name-row">
              <text class="technician-name">{{item.name}}</text>
              <view class="technician-badges">
                <text class="badge badge-verified" wx:if="{{item.verified}}">已认证</text>
                <text class="badge badge-experienced" wx:if="{{item.experience >= 5}}">{{item.experience}}年经验</text>
              </view>
            </view>

            <view class="technician-meta">
              <view class="rating-info">
                <text class="rating-stars">{{item.rating}} ⭐</text>
                <text class="order-count">{{item.orderCount}}单</text>
                <text class="response-time">{{item.responseTime}}分钟响应</text>
              </view>
              <view class="technician-tags">
                <text
                  class="tag"
                  wx:for="{{item.tags}}"
                  wx:for-item="tag"
                  wx:key="*this"
                >{{tag}}</text>
              </view>
            </view>
          </view>

          <view class="distance-info">
            <text class="distance">{{item.distance}}km</text>
            <text class="estimate-time">{{item.estimateTime}}分钟</text>
          </view>
        </view>

        <!-- 服务项目 -->
        <view class="service-items">
          <text class="service-title">服务项目：</text>
          <view class="service-list">
            <text
              class="service-item"
              wx:for="{{item.services}}"
              wx:for-item="service"
              wx:key="id"
            >{{service.name}}</text>
          </view>
        </view>

        <!-- 价格区间 -->
        <view class="price-range">
          <text class="price-label">价格：</text>
          <text class="price-text">¥{{item.minPrice}}-¥{{item.maxPrice}}</text>
          <text class="price-unit">/次</text>
        </view>

        <!-- 预约按钮 -->
        <view class="action-buttons">
          <button class="btn btn-outline" bindtap="onTechnicianTap" data-technician="{{item}}" data-action="view">
            查看详情
          </button>
          <button class="btn btn-primary" bindtap="onTechnicianTap" data-technician="{{item}}" data-action="book">
            立即预约
          </button>
        </view>
      </view>

      <!-- 加载状态 -->
      <view class="load-more" wx:if="{{hasMore}}">
        <text class="load-text">{{loading ? '加载中...' : '上拉加载更多'}}</text>
      </view>

      <!-- 没有更多数据 -->
      <view class="no-more" wx:if="{{!hasMore && technicians.length > 0}}">
        <text class="no-more-text">没有更多技师了</text>
      </view>

      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{technicians.length === 0 && !loading}}">
        <text class="empty-icon">👷</text>
        <text class="empty-title">暂无符合条件的技师</text>
        <text class="empty-desc">请尝试调整筛选条件或搜索关键词</text>
        <button class="btn btn-primary" bindtap="onResetFilters">重置筛选</button>
      </view>
    </view>
  </scroll-view>

  <!-- 地图模式切换 -->
  <view class="map-toggle" bindtap="onToggleMap">
    <text class="toggle-icon">🗺️</text>
    <text class="toggle-text">地图模式</text>
  </view>

  <!-- 回到顶部 -->
  <view class="back-to-top {{showBackTop ? 'show' : ''}}" bindtap="onBackToTop">
    <text class="top-icon">⬆️</text>
  </view>
</view>

<!-- 加载遮罩 -->
<view class="loading-mask" wx:if="{{initialLoading}}">
  <view class="loading-content">
    <text class="loading-icon">⏳</text>
    <text class="loading-text">正在加载技师列表...</text>
  </view>
</view>